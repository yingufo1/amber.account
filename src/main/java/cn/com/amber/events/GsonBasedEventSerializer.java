package cn.com.amber.events;import cn.com.amber.commons.json.GsonUtil;/** * 基于Gson的序列化器 * * @author yangying * @version 1.0 * @since 2022/9/20 **/public class GsonBasedEventSerializer implements EventSerializer{    @Override    public String serialize(Event event) {        return GsonUtil.serializing(event,event.getType().getType());    }    @Override    public Event deserialize(String serializeStr) {        String eventType = GsonUtil.getStringFromKey(serializeStr,"type");        EventTypeEnum type = EventTypeEnum.getValue(eventType);        if(type == null){            throw  new RuntimeException("Not found evnet type.Makesure eventType definited:%s"+eventType);        }        return GsonUtil.deserializing(serializeStr,type.getType());    }}