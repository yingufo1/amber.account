package cn.com.amber.api;import cn.com.amber.api.dto.req.QuerySubjectReq;import cn.com.amber.api.dto.response.SubjectDTO;import cn.com.amber.commons.untils.StringUtil;import cn.com.amber.entity.enums.AccountingElementEnum;import cn.com.amber.infrastructure.annotation.ApiLog;import cn.com.amber.infrastructure.api.Response;import cn.com.amber.infrastructure.api.enums.ResponseCode;import cn.com.amber.infrastructure.exception.BusinessException;import cn.com.amber.service.SubjectService;import lombok.extern.slf4j.Slf4j;import org.springframework.web.bind.annotation.RequestBody;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RestController;import javax.annotation.Resource;import java.util.List;/** * 科目入口 * * @author yangying * @version 1.0 * @since 2022/9/28 **/@RestController@Slf4j@RequestMapping("/subject")public class SubjectController {    @Resource    private SubjectService subjectService;    @ApiLog    @RequestMapping(value = "/query",method = RequestMethod.POST)    public Response<List<SubjectDTO>> query(@RequestBody QuerySubjectReq querySubjectReq){        String subjectNo = querySubjectReq.getSubjectNo();        int element = querySubjectReq.getElement();        if(StringUtil.isBlankString(subjectNo) && AccountingElementEnum.getValue(element) == AccountingElementEnum.UN_KNOW){            throw BusinessException.create(ResponseCode.ILLEGAL_ARGUMENT,"科目编号为空且未知的会计要素");        }        return Response.SUCCESS(subjectService.querySubjectHierarchy(querySubjectReq));    }}