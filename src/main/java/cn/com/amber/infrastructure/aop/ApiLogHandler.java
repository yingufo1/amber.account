package cn.com.amber.infrastructure.aop;import com.alibaba.fastjson2.JSONObject;import lombok.extern.slf4j.Slf4j;import org.aspectj.lang.ProceedingJoinPoint;/** * 日志打印处理器 * * @author yangying * @version 1.0 * @since 2022/9/25 **/@Slf4jpublic abstract class ApiLogHandler {    public abstract Object proceed(ProceedingJoinPoint proceedingJoinPoint) throws Throwable;    /**     * 把请求对象o转换为json对象，并打印。注意，转换o后的json对象，总是放在最后一个参数打印，也就是会放在可变参数args之后。     * @param o     * @param whenConverted     * @param whenConvertFail     * @param arg     */    final protected void logConvertToJsonInfo(Object o, String whenConverted, String whenConvertFail, Object... arg){        try {            String info = JSONObject.toJSONString(o);            if(arg.length>0){                log.info(whenConverted, arg,info);            }else{                log.info(whenConverted,info);            }        }catch (Exception e){            log.error(whenConvertFail);        }    }}