package cn.com.amber.infrastructure.aop;import cn.com.amber.infrastructure.api.Response;import cn.com.amber.infrastructure.api.enums.ResponseCode;import org.springframework.http.HttpStatus;import org.springframework.validation.BindingResult;import org.springframework.validation.FieldError;import org.springframework.web.bind.MethodArgumentNotValidException;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.bind.annotation.ResponseStatus;import org.springframework.web.bind.annotation.RestControllerAdvice;import javax.validation.ConstraintViolationException;/** * 参数校验错误处理器 * * @author yangying * @version 1.0 * @since 2022/9/25 **/@RestControllerAdvicepublic class ApiArgValidateExceptionHandler {    /**     * 对Bean field校验失败异常处理     * @param ex     * @return     */    @ExceptionHandler({MethodArgumentNotValidException.class})    @ResponseStatus(HttpStatus.OK)    @ResponseBody    public Response handleMethodArgumentNotValidException(MethodArgumentNotValidException ex) {        BindingResult bindingResult = ex.getBindingResult();        StringBuilder sb = new StringBuilder("校验失败:");        for (FieldError fieldError : bindingResult.getFieldErrors()) {            sb.append(fieldError.getField()).append("：").append(fieldError.getDefaultMessage()).append(", ");        }        String msg = sb.toString();        return Response.FAIL_WITH_MESSAGE(ResponseCode.ILLEGAL_ARGUMENT,msg);    }    /**     * 对@PathVariable 标注变量校验失败异常处理     * @param ex     * @return     */    @ExceptionHandler({ConstraintViolationException.class})    @ResponseStatus(HttpStatus.OK)    @ResponseBody    public Response handleConstraintViolationException(ConstraintViolationException ex) {        return Response.FAIL_WITH_MESSAGE(ResponseCode.ILLEGAL_ARGUMENT,ex.getMessage());    }}